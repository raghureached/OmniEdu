// import React from "react";
// import { useLocation, useNavigate } from "react-router-dom";
// import SurveyPreview from "./SurveyPreviewNew";

// const SurveyPreviewPage = () => {
//   const location = useLocation();
//   const navigate = useNavigate();

//   // Get formData passed from SurveyForm
//   const formData = location.state?.formData;

//   if (!formData) {
//     return (
//       <div style={{ textAlign: "center", marginTop: "50px" }}>
//         <h2>No survey data found</h2>
//         <button onClick={() => navigate(-1)}>Go Back</button>
//       </div>
//     );
//   }

//   return (
//     <div>
//       <SurveyPreview
//         formData={formData}
//         onClosePreview={() => navigate(-1)} // Go back when close button is clicked
//       />
//     </div>
//   );
// };

// export default SurveyPreviewPage;
import React from "react";
import { useLocation, useNavigate } from "react-router-dom";
import SurveyPreview from "./SurveyPreviewNew";

const SurveyPreviewPage = () => {
  const location = useLocation();
  const navigate = useNavigate();

  const formData = location.state?.formData;
  const fromSurveysPage = location.state?.fromSurveysPage;

  if (!formData) {
    return (
      <div style={{ textAlign: "center", marginTop: "50px" }}>
        <h2>No survey data found</h2>
        <button onClick={() => navigate("/surveys")}>Go Back</button>
      </div>
    );
  }

  return (
    <SurveyPreview
      formData={formData}
      onClosePreview={() => {
        if (fromSurveysPage) {
          // âœ… Navigate back to surveys page WITH state telling it to open form
          navigate("/global-admin/surveys", { state: { openForm: true, formData } });
        } else {
          navigate("/global-admin/surveys");
        }
      }}
    />
  );
};

export default SurveyPreviewPage;

